<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
     <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://res.cloudinary.com/dwpnsfghy/image/upload/v1769057675/unn1rypkgbutbuxarn1k.png">
    <title>DeGamesLauncher</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body>
    <!-- Sidebar Kiri -->
<div id="sidebar" class="sidebar">
    <div class="sidebar-header">
        <h3>Menu</h3>
        <span class="close-btn" id="closeSidebar">&times;</span>
    </div>
    <ul class="sidebar-menu">
        <li><a href="https://store.steampowered.com/" target="_blank"><i class="fa-solid fa-globe"></i> Steam</a></li>
        <li><a href="https://www.steamtools.net/download" target="_blank"> <i class="fa-solid fa-circle-down"></i> Steam Tools</a></li>
        <li><a href="page/about.html" target="_blank"> <i class="fa-solid fa-address-card"></i> About DeGames</a></li>
        <li><a href="#"> <i class="fa-solid fa-gear"></i> Setting</a></li>
        <!-- Tambahkan menu lain di sini -->
    </ul>
</div>

<!-- Overlay saat sidebar terbuka (opsional) -->
<div id="overlay" class="overlay"></div>
    <!-- Header Tetap di Atas -->
    <!-- Header Tetap di Atas -->
<header class="top-bar">
    <div class="top-bar-left">
        <div class="menu-toggle" id="menuToggle">â˜°</div>
    </div>
    <div class="top-bar-center">
        <div class="brand">
            <img src="https://res.cloudinary.com/dwpnsfghy/image/upload/v1769057675/unn1rypkgbutbuxarn1k.png" alt="Debotz" class="logo" />
            <span class="brand-text">DeGamesLauncher</span>
        </div>
    </div>
    <div class="top-bar-right">
        <div id="total-count" class="header-count"></div>
    </div>
</header>

    <div class="container">
        <!-- Counter total game untuk mobile, tampil di atas search box -->
        <div id="total-count-mobile" class="total-count-badge"></div>
        <!-- Kotak pencarian -->
        <div class="search-wrapper">
            <i class="fa-solid fa-magnifying-glass search-icon"></i>
            <input
                type="text"
                id="searchInput"
                class="search-box"
                placeholder="Cari berdasarkan nama game atau AppID..."
            />
        </div>


        <div id="gamesContainer" class="games-grid"></div>
        <div id="pagination" class="pagination-area"></div>
    </div>
<footer class="main-footer">
    <div class="footer-content">
        <div class="footer-brand">
            <div>
                <div class="brand-bawah">
                    <img src="https://res.cloudinary.com/dwpnsfghy/image/upload/v1769057675/unn1rypkgbutbuxarn1k.png" alt="Debotz" class="logo" />
                    <span class="brand-bawah-text">DeGamesLauncher</span>
                </div>
                <p class="footer-description">
                    DeGamesLauncher adalah tempat nongkrong para gamer buat cari list game Steam lengkap dari berbagai genre. 
                    Tinggal pilih, cek, dan temukan game favoritmu dengan cepat dan praktis. 
                    Semua game ada di satu tempat, simpel tanpa ribet. ðŸŽ®ðŸ”¥
                </p>
            </div>
        </div>

        <div class="footer-links">
            <h4>Quick Links</h4>
            <ul>
                <li><a href="https://store.steampowered.com/" target="_blank"><i class="fa-solid fa-globe"></i> Steam Store</a></li>
                <li><a href="https://www.steamtools.net/download" target="_blank"><i class="fa-solid fa-circle-down"></i> Steam Tools</a></li>
                <li><a href="#"><i class="fa-solid fa-address-card"></i> About</a></li>
                <li><a href="#"><i class="fa-solid fa-gear"></i> Settings</a></li>
            </ul>
        </div>

        <div class="footer-social">
            <h4>Follow Us</h4>
            <div class="social-icons">
                <a href="#" aria-label="GitHub"><i class="fab fa-github"></i></a>
                <a href="#" aria-label="Discord"><i class="fab fa-discord"></i></a>
            </div>
        </div>
    </div>

    <div class="footer-bottom">
        <p>&copy; 2026 Debotz. All rights reserved.</p>
    </div>
</footer>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        let allGames = [];
        let currentPage = 1;
        const gamesPerPage = 12;
        let isSearching = false;

        const Toast = Swal.mixin({
            toast: true,
            position: "top-end",
            showConfirmButton: false,
            timer: 3000,
            timerProgressBar: true,
            didOpen: (toast) => {
                toast.onmouseenter = Swal.stopTimer;
                toast.onmouseleave = Swal.resumeTimer;
            }
        });

        async function copyAppId(appid, gameName) {
            try {
                await navigator.clipboard.writeText(appid);
                Toast.fire({
                    icon: "success",
                    title: `AppID ${gameName} tersalin!`
                });
            } catch (err) {
                console.error("Gagal menyalin:", err);
                Toast.fire({
                    icon: "error",
                    title: "Gagal menyalin AppID"
                });
            }
        }

        function renderGames(games, fromSearch = false) {
            const container = document.getElementById('gamesContainer');
            container.innerHTML = '';

            if (games.length === 0) {
                container.innerHTML = '<p style="grid-column: 1/-1; text-align: center; color: #888;">Tidak ada game ditemukan.</p>';
                renderPagination([], 0); // Sembunyikan pagination
                return;
            }

            games.forEach(game => {
                const card = document.createElement('div');
                card.className = 'game-card';

                // Hapus spasi berlebih di AppID
                const cleanAppId = game.appid.toString().trim();
                const imageUrl = `https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/${cleanAppId}/header.jpg?t=1729702001`;
                const storeUrl = `https://store.steampowered.com/app/${cleanAppId}/${encodeURIComponent(game.name.replace(/\s+/g, '_'))}/?curator_clanid=4777282`;

                card.innerHTML = `
                    <img class="game-image" src="${imageUrl}" alt="Header ${game.name}" onerror="this.style.display='none'; this.parentElement.querySelector('.fallback').style.display='flex';">
                    <div class="game-image-error fallback" style="display:none;">Gambar tidak tersedia</div>
                    <div class="game-name">${game.name}</div>
                    <div class="appid-container">
                        <span class="appid-text">${cleanAppId}</span>
                        <i class="fa-solid fa-copy copy-icon" title="Salin AppID" data-appid="${cleanAppId}" data-name="${game.name}"></i>
                    </div>
                    <div class="copy-tip">Klik Icon ðŸ“‹ untuk menyalin AppID</div>
                    <a href="${storeUrl}" target="_blank" rel="noopener noreferrer" class="store-btn"> Store Steam </a>
                `;
                card.querySelectorAll('.copy-icon').forEach(icon => {
                    icon.addEventListener('click', (e) => {
                        const appid = e.target.getAttribute('data-appid');
                        const name = e.target.getAttribute('data-name');
                        copyAppId(appid, name);
                    });
                });

                container.appendChild(card);
            });

            // Render pagination hanya jika bukan dari pencarian
            if (!fromSearch) {
                const totalPages = Math.ceil(allGames.length / gamesPerPage);
                renderPagination(allGames, totalPages);
            } else {
                document.getElementById('pagination').innerHTML = '';
            }
        }

        function renderPagination(games, totalPages) {
            const paginationEl = document.getElementById('pagination');
            if (totalPages <= 1 || isSearching) {
                paginationEl.innerHTML = '';
                return;
            }

            const start = (currentPage - 1) * gamesPerPage + 1;
            const end = Math.min(currentPage * gamesPerPage, games.length);
            const info = `<span style="color: #ffffff;">Menampilkan ${start}â€“${end} dari ${games.length} game </span>`;

            let buttons = '';

            if (currentPage > 1) {
                buttons += `<button onclick="goToPage(${currentPage - 1})" class="nav-btn">Â« Back</button>`;
            }

            buttons += `<span style="margin: 0 12px; color: #ffffff;">Halaman ${currentPage} dari ${totalPages}</span>`;

            if (currentPage < totalPages) {
                buttons += `<button onclick="goToPage(${currentPage + 1})" class="nav-btn">Next Â»</button>`;
            }

            paginationEl.innerHTML = `
                <div style="margin-bottom: 8px; color: #666;">${info}</div>
                <div>${buttons}</div>
            `;
        }

        function goToPage(page) {
            currentPage = page;
            const start = (page - 1) * gamesPerPage;
            const end = start + gamesPerPage;
            renderGames(allGames.slice(start, end));
        }

        function filterGames(query) {
            const q = query.trim().toLowerCase();
            if (!q) {
                isSearching = false;
                currentPage = 1;
                renderGames(allGames.slice(0, gamesPerPage));
                return;
            }

            isSearching = true;
            const filtered = allGames.filter(game =>
                game.name.toLowerCase().includes(q) ||
                game.appid.toString().includes(q)
            );

            renderGames(filtered, true);
        }

        document.addEventListener('DOMContentLoaded', async () => {
            const totalCountEl = document.getElementById('total-count');
            const totalCountMobileEl = document.getElementById('total-count-mobile');
            try {
                const res = await fetch('data/games.json');
                if (!res.ok) throw new Error('Gagal memuat games.json');
                allGames = await res.json();

                if (!Array.isArray(allGames)) {
                    throw new Error('Data JSON tidak valid (bukan array)');
                }

                totalCountEl.textContent = `List ${allGames.length} Games`;
                totalCountMobileEl.textContent = `List ${allGames.length} Games`;
                currentPage = 1;
                renderGames(allGames.slice(0, gamesPerPage));

                const searchInput = document.getElementById('searchInput');
                searchInput.addEventListener('input', (e) => {
                    filterGames(e.target.value);
                });

            } catch (err) {
                totalCountEl.textContent = 'Gagal memuat data';
                totalCountMobileEl.textContent = 'Gagal memuat data';
                document.getElementById('gamesContainer').innerHTML =
                    `<p style="color: red; grid-column: 1/-1; text-align: center;">Error: ${err.message}</p>`;
                console.error(err);
            }
        });
                // Toggle sidebar
        const menuToggle = document.getElementById('menuToggle');
        const closeSidebar = document.getElementById('closeSidebar');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');

        function openSidebar() {
            sidebar.classList.add('open');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden'; // Cegah scroll latar
        }

        function closeSidebarFunc() {
            sidebar.classList.remove('open');
            overlay.classList.remove('active');
            document.body.style.overflow = ''; // Izinkan scroll lagi
        }

        menuToggle.addEventListener('click', openSidebar);
        closeSidebar.addEventListener('click', closeSidebarFunc);
        overlay.addEventListener('click', closeSidebarFunc);

        // Tutup sidebar saat resize ke ukuran besar (opsional)
        window.addEventListener('resize', () => {
            if (window.innerWidth >= 992 && sidebar.classList.contains('open')) {
                closeSidebarFunc();
            }
        });
    </script>
</body>
</html>